<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>为什么我不喜欢 styled-components | linrz</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.b6c88d7e.css" as="style"><link rel="preload" href="/assets/js/app.9e8ffa34.js" as="script"><link rel="preload" href="/assets/js/3.6f5a8b67.js" as="script"><link rel="preload" href="/assets/js/1.5ac642ba.js" as="script"><link rel="preload" href="/assets/js/13.594204c6.js" as="script"><link rel="preload" href="/assets/js/5.533ef7bb.js" as="script"><link rel="prefetch" href="/assets/js/10.e632b6f4.js"><link rel="prefetch" href="/assets/js/11.a142cc10.js"><link rel="prefetch" href="/assets/js/12.c461d99e.js"><link rel="prefetch" href="/assets/js/14.632276d8.js"><link rel="prefetch" href="/assets/js/15.0d1dc80d.js"><link rel="prefetch" href="/assets/js/16.39c555cf.js"><link rel="prefetch" href="/assets/js/17.d83f1c5c.js"><link rel="prefetch" href="/assets/js/4.bbe48830.js"><link rel="prefetch" href="/assets/js/6.1393234e.js"><link rel="prefetch" href="/assets/js/7.e7f03ddb.js"><link rel="prefetch" href="/assets/js/8.0da79a76.js"><link rel="prefetch" href="/assets/js/9.4f1e345b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b6c88d7e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="cute-nav"><div class="cute-nav-left"><a href="/">linrz</a></div> <div class="cute-nav-right"><div class="cute-nav-item cute-nav-active"><a href="/">Blog</a></div><div class="cute-nav-item "><a href="/about.html">About</a></div></div></div> <div class="cute-content"><div class="cute-page-header"><div class="cute-page-title">为什么我不喜欢 styled-components</div> <div class="cute-page-subtitle"><span class="cute-page-date">05/14 2018</span> <span>☕️</span> <span>2 min read</span></div></div> <div class="cute-page-markdown"><div slot="default" class="markdown-body content default"><h2 id="样式覆盖"><a href="#样式覆盖" class="header-anchor">#</a> 样式覆盖</h2> <p>使用 styled-components 后渲染成 HTML 的结果如下图：
<img src="http://img.lastwhisper.cn/styled-components-render.png" alt=""></p> <p>一个通用的组件大多是不需要进行样式覆盖的，即使需要覆盖也会支持 props className 的，但是使用 styled-compoents 就烦心了，产品可能会找到我说，哎呀，这个地方能不能调宽点，对着代码随机生成，每次刷新会变化的，只能使用 <code>div[class^=sc-]</code>这种选择器将就一下，样式覆盖由于 <code>inline-style</code> 的优先级和styled-components 无规律的命名方式变得难以操作</p> <h2 id="可读性"><a href="#可读性" class="header-anchor">#</a> 可读性</h2> <p>随便拿团队里使用的一个栗子，一眼望过去，你觉得哪些是 styled-compoents 哪些是自定义的 components 呢？
<img src="http://img.lastwhisper.cn/styled-components-example.png" alt="styled-components-example"></p> <p>实际上图中的的所有组件都是 styled-components，可以约定以 <Styledxxx></Styledxxx> 开头，但总觉得有点烦恼呀</p> <h2 id="性能"><a href="#性能" class="header-anchor">#</a> 性能</h2> <p>styled-compoents 无法分离静态css文件，所有的样式需要等待浏览器解析完styled-compoents后才开始渲染。
导致渲染瓶颈卡在这个点上，我做了一个实验，相同的情况下，使用css和styled-compoents渲染进行性能比较。可能你会觉得css天生比styled-compoents渲染占优势，所以这里贴近业务，挑选一个常见的筛选表单加表格的页面来做实验，统计了下这种页面的节点数有 1824 个，我们取 1000 数量级，通过 Chrome Devtools 进行渲染性能比较，如下图
<img src="http://img.lastwhisper.cn/use-styled-components.png" alt="use-sc"> <img src="http://img.lastwhisper.cn/use-sass.png" alt="use-sass"></p> <p>简单的统计了十次人肉结果，采用 css 的方案时间在 300-400 区间，采用 styled-compoents 时间在 600-700 左右。</p> <h2 id="不支持一些工具"><a href="#不支持一些工具" class="header-anchor">#</a> 不支持一些工具</h2> <p>不支持 stylelint 和 postcss 类似的插件完善，有点难受。</p></div></div> <div class="cute-share">
  Share via
  <div class="cute-share-icon"><i class="iconfont icon-weibo"></i></div><div class="cute-share-icon"><i class="iconfont icon-twitter"></i></div><div class="cute-share-icon"><i class="iconfont icon-wechat"></i></div><div class="cute-share-icon"><i class="iconfont icon-download"></i></div> <div class="van-overlay" style="z-index:1;display:none;"><div class="cute-qrcode-container"><div class="cute-qrcode-inner"><div class="cute-qrcode-title">微信扫一扫，右上角分享</div> <div value="" level="L" background="#fff" foreground="#000"><canvas height="200" width="200" style="width:200px;height:200px;"></canvas></div></div></div></div></div></div> <div class="cute-footer cute-content"><div class="cute-footer-copyright">
    © linrz Themed By <a target="_blank" href="https://github.com/linrz/vuepress-theme-cute">vuepress-theme-cute</a></div> <div class="cute-footer-hills"></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.9e8ffa34.js" defer></script><script src="/assets/js/3.6f5a8b67.js" defer></script><script src="/assets/js/1.5ac642ba.js" defer></script><script src="/assets/js/13.594204c6.js" defer></script><script src="/assets/js/5.533ef7bb.js" defer></script>
  </body>
</html>
